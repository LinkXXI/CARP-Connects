<template name="invitations">

    <nav id="breadcrumb-nav" class="blue">
        <div class="nav-wrapper">
            <div class="col s12">
                <a href="{{pathFor 'Index'}}" class="breadcrumb">Home</a>
                <a class="breadcrumb">Invitations</a>
            </div>
        </div>
    </nav>

    <div class="custom-wrapper">
        <h2>Invitations</h2>

        <table class="striped">
            <thead>
            <tr>
                <th data-field="_id">Invite Code</th>
                <th data-field="sent">Email Sent</th>
                <th data-field="used">Used</th>
                <th data-field="generatedBy">Generated By</th>
                <th data-field="validFor">Redeemable By</th>
                <th data-field="appliedTo">Redeemed By</th>
                <!--th data-field="edit"></th-->
                <th data-field="delete"></th>
            </tr>
            </thead>
            <tbody>
            {{#each invitations}}
                {{>invitation}}
            {{/each}}
            </tbody>

            <div class="fixed-action-btn" style="bottom: 24px; right:24px;">
                <a id="new-invite" class="btn-floating btn-large red">
                    New
                </a>
            </div>
        </table>
    </div>

    <div class="modal" id="cancelModal">
        <div class="modal-content">
            <h4>Cancel</h4>

            <p>Are you sure you would like to cancel? All unsaved changes will be lost</p>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="cancel-yes">Yes</a>
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="cancel-no">No</a>
        </div>
    </div>
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <h4>
                Delete Invite
            </h4>

            <p>
                Are you sure you want to delete this invitation?
            </p>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="delete-yes">Yes</a>
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="delete-no">No</a>
        </div>
    </div>

    <div class="modal" id="addModal">
        <div class="modal-content">
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col 6">
                            <a href="#existing" class="active">Existing User</a>
                        </li>
                        <li class="tab col 6">
                            <a href="#new">New User</a>
                        </li>
                    </ul>
                </div>
                <div id="existing" class="col s12">
                    <div class="input-field col m7 s12">
                        <select id="invite-existing-select" class="browser-default">
                            <option value="" selected disabled>Select a User</option>
                            {{#each uninvitedUsers}}
                                <option value="{{_id}}">{{profile.firstName}} {{profile.lastName}}</option>
                            {{/each}}
                        </select>
                        <p>
                            <input type="checkbox" id="sendEmail-existing"/>
                            <label for="sendEmail-existing">Send invitation email?</label>
                        </p>
                    </div>
                </div>
                <div id="new" class="co s12">
                    <div class="input-field col m7 s12">
                        <input type="email" id="email-new"/>
                        <label for="email-new">New User Email Address</label>

                        <p>
                            <input type="checkbox" id="sendEmail-new"/>
                            <label for="sendEmail-new">Send invitation email?</label>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat" id="add-add">Add</a>
            <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat"
               id="add-cancel">Cancel</a>
        </div>
    </div>
</template>

<template name="invitation">

    {{#if edit}}
        <tr class="">
            <td>{{_id}}</td>
            <td>
                <p>
                    <input type="checkbox" id="checkUsed" disabled/>
                    <label for="checkUsed"></label>
                </p>
            </td>
            <td><a href="{{profilePath generatedBy}}">{{name generatedBy}}</a></td>
            <td>
                {{redeemList}} <span class='green-text'>{{redeemEdits}}</span>
                <button class="btn-floating waves-effect waves-light red" style="float:right" id="addEligible">+
                </button>
            </td>
            <td></td>
            <!--td>
                <button class="btn waves-effect waves-light" id="save">Save</button>
                <br/>
                <button class="btn waves-effect waves-light" id="cancel">Cancel</button>
            </td-->
        </tr>
    {{else}}
        <tr>
            <td>{{_id}}</td>
            <td>
                <p>
                    <input type="checkbox" id="checkSent" checked="{{checkSent}}" disabled/>
                    <label for="checkSent"></label>
                </p>
            </td>
            <td>
                <p>
                    <input type="checkbox" id="checkUsed" checked="{{checkUsed}}" disabled/>
                    <label for="checkUsed"></label>
                </p>
            </td>
            <td><a href="{{profilePath generatedBy}}">{{name generatedBy}}</a></td>
            <td>{{redeemList}}</td>
            <td><a href="{{profilePath appliedTo}}">{{name appliedTo}}</a></td>
            <!--td>
                {{#if appliedTo}}
                    <button class="btn waves-effect waves-light disabled" disabled>Edit</button>
                {{else}}
                    <button class="btn waves-effect waves-light" id="edit">Edit</button>
                {{/if}}
            </td-->
            <td>
                {{#if appliedTo}}
                    <button class="btn-floating waves-effect waves-light red disabled" disabled>X</button>
                {{else}}
                    <button class="btn-floating waves-effect waves-light red" id="delete">X</button>
                {{/if}}
            </td>
        </tr>
    {{/if}}

</template>